import{h as e,a as t}from"./userStore-DvQOQ6Ie.js";import{_ as l}from"./index-CiL08aPX.js";const a=e=>(Vue.pushScopeId("data-v-8f5d81c6"),e=e(),Vue.popScopeId(),e),u={class:"xtx-pay-checkout-page"},V={class:"container"},d={class:"wrapper"},o=a((()=>Vue.createElementVNode("h3",{class:"box-title"},"收货地址",-1))),r={class:"box-body"},c={class:"address"},n={class:"text"},s={key:0,class:"none"},i={key:1},m=a((()=>Vue.createElementVNode("span",null,[Vue.createTextVNode("收"),Vue.createElementVNode("i"),Vue.createTextVNode("货"),Vue.createElementVNode("i"),Vue.createTextVNode("人：")],-1))),N=a((()=>Vue.createElementVNode("span",null,"联系方式：",-1))),p=a((()=>Vue.createElementVNode("span",null,"收货地址：",-1))),v={class:"action"},E=a((()=>Vue.createElementVNode("h3",{class:"box-title"},"商品信息",-1))),y={class:"box-body"},x={class:"goods"},h=a((()=>Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[Vue.createElementVNode("th",{style:{"min-width":"520px"}},"商品信息"),Vue.createElementVNode("th",{style:{"min-width":"170px"}},"单价"),Vue.createElementVNode("th",{style:{"min-width":"170px"}},"数量"),Vue.createElementVNode("th",{style:{"min-width":"170px"}},"小计"),Vue.createElementVNode("th",{style:{"min-width":"170px"}},"实付")])],-1))),f={href:"javascript:",class:"info"},g=["src"],k={class:"right"},b=Vue.createStaticVNode('<h3 class="box-title" data-v-8f5d81c6>配送时间</h3><div class="box-body" data-v-8f5d81c6><a class="my-btn active" href="javascript:" data-v-8f5d81c6>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:" data-v-8f5d81c6>工作日送货：周一至周五</a><a class="my-btn" href="javascript:" data-v-8f5d81c6>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-8f5d81c6>支付方式</h3><div class="box-body" data-v-8f5d81c6><a class="my-btn active" href="javascript:" data-v-8f5d81c6>在线支付</a><a class="my-btn" href="javascript:" data-v-8f5d81c6>货到付款</a><span style="color:#999;" data-v-8f5d81c6>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-8f5d81c6>金额明细</h3>',5),T={class:"box-body"},S={class:"total"},C=a((()=>Vue.createElementVNode("dt",null,"商品件数：",-1))),D=a((()=>Vue.createElementVNode("dt",null,"商品总价：",-1))),w=a((()=>Vue.createElementVNode("dt",null,[Vue.createTextVNode("运"),Vue.createElementVNode("i"),Vue.createTextVNode("费：")],-1))),B=a((()=>Vue.createElementVNode("dt",null,"应付总额：",-1))),_={class:"price"},j={class:"submit"},F={class:"addressWrapper"},P=["onClick"],I=a((()=>Vue.createElementVNode("span",null,[Vue.createTextVNode("收"),Vue.createElementVNode("i"),Vue.createTextVNode("货"),Vue.createElementVNode("i"),Vue.createTextVNode("人：")],-1))),L=a((()=>Vue.createElementVNode("span",null,"联系方式：",-1))),z=a((()=>Vue.createElementVNode("span",null,"收货地址：",-1))),A={class:"dialog-footer"},M=l({__name:"Checkout",setup(l){const a=t(),M=VueRouter.useRouter(),R=Vue.ref({}),q=Vue.ref({}),O=async()=>{const t=await e({url:"/member/order/pre"});R.value=t.result,q.value=t.result.userAddresses.find((e=>0===e.isDefault))};Vue.onMounted((()=>O()));const U=Vue.ref(!1),W=Vue.ref({}),G=e=>W.value.id?e.id===W.value.id:0===e.isDefault,H=()=>{q.value=W.value,U.value=!1,W.value={}},J=async()=>{var t;const l=(await(t={deliveryTimeType:1,payType:1,payChannel:1,buyerMessage:"",goods:R.value.goods.map((e=>({skuId:e.skuId,count:e.count}))),addressId:q.value.id},e({url:"/member/order",method:"POST",data:t}))).result.id;await M.push({path:"/pay",query:{id:l}}),await a.updateCartList()};return(e,t)=>{var l,a,M,O;const K=Vue.resolveComponent("el-button"),Q=Vue.resolveComponent("el-dialog");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",u,[Vue.createElementVNode("div",V,[Vue.createElementVNode("div",d,[o,Vue.createElementVNode("div",r,[Vue.createElementVNode("div",c,[Vue.createElementVNode("div",n,[q.value?(Vue.openBlock(),Vue.createElementBlock("ul",i,[Vue.createElementVNode("li",null,[m,Vue.createTextVNode(Vue.toDisplayString(q.value.receiver),1)]),Vue.createElementVNode("li",null,[N,Vue.createTextVNode(Vue.toDisplayString(q.value.contact),1)]),Vue.createElementVNode("li",null,[p,Vue.createTextVNode(Vue.toDisplayString(q.value.fullLocation)+" "+Vue.toDisplayString(q.value.address),1)])])):(Vue.openBlock(),Vue.createElementBlock("div",s,"您需要先添加收货地址才可提交订单。"))]),Vue.createElementVNode("div",v,[Vue.createVNode(K,{size:"large",onClick:t[0]||(t[0]=e=>U.value=!0)},{default:Vue.withCtx((()=>[Vue.createTextVNode("切换地址")])),_:1}),Vue.createVNode(K,{size:"large",onClick:t[1]||(t[1]=t=>e.addFlag=!0)},{default:Vue.withCtx((()=>[Vue.createTextVNode("添加地址")])),_:1})])])]),E,Vue.createElementVNode("div",y,[Vue.createElementVNode("table",x,[h,Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(R.value.goods,(e=>(Vue.openBlock(),Vue.createElementBlock("tr",{key:e.id},[Vue.createElementVNode("td",null,[Vue.createElementVNode("a",f,[Vue.createElementVNode("img",{src:e.picture,alt:""},null,8,g),Vue.createElementVNode("div",k,[Vue.createElementVNode("p",null,Vue.toDisplayString(e.name),1),Vue.createElementVNode("p",null,Vue.toDisplayString(e.attrsText),1)])])]),Vue.createElementVNode("td",null,"¥"+Vue.toDisplayString(e.price),1),Vue.createElementVNode("td",null,Vue.toDisplayString(e.price),1),Vue.createElementVNode("td",null,"¥"+Vue.toDisplayString(e.totalPrice),1),Vue.createElementVNode("td",null,"¥"+Vue.toDisplayString(e.totalPayPrice),1)])))),128))])])]),b,Vue.createElementVNode("div",T,[Vue.createElementVNode("div",S,[Vue.createElementVNode("dl",null,[C,Vue.createElementVNode("dd",null,Vue.toDisplayString(null==(l=R.value.summary)?void 0:l.goodsCount)+"件",1)]),Vue.createElementVNode("dl",null,[D,Vue.createElementVNode("dd",null,"¥"+Vue.toDisplayString(null==(a=R.value.summary)?void 0:a.totalPrice.toFixed(2)),1)]),Vue.createElementVNode("dl",null,[w,Vue.createElementVNode("dd",null,"¥"+Vue.toDisplayString(null==(M=R.value.summary)?void 0:M.postFee.toFixed(2)),1)]),Vue.createElementVNode("dl",null,[B,Vue.createElementVNode("dd",_,Vue.toDisplayString(null==(O=R.value.summary)?void 0:O.totalPayPrice.toFixed(2)),1)])])]),Vue.createElementVNode("div",j,[Vue.createVNode(K,{type:"primary",size:"large",onClick:J},{default:Vue.withCtx((()=>[Vue.createTextVNode("提交订单")])),_:1})])])])]),Vue.createVNode(Q,{modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=e=>U.value=e),title:"切换收货地址",width:"30%",center:""},{footer:Vue.withCtx((()=>[Vue.createElementVNode("span",A,[Vue.createVNode(K,null,{default:Vue.withCtx((()=>[Vue.createTextVNode("取消")])),_:1}),Vue.createVNode(K,{type:"primary",onClick:H},{default:Vue.withCtx((()=>[Vue.createTextVNode("确定")])),_:1})])])),default:Vue.withCtx((()=>[Vue.createElementVNode("div",F,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(R.value.userAddresses,(e=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["text item",{active:G(e)}]),onClick:t=>(e=>{W.value=e})(e),key:e.id},[Vue.createElementVNode("ul",null,[Vue.createElementVNode("li",null,[I,Vue.createTextVNode(Vue.toDisplayString(e.receiver),1)]),Vue.createElementVNode("li",null,[L,Vue.createTextVNode(Vue.toDisplayString(e.contact),1)]),Vue.createElementVNode("li",null,[z,Vue.createTextVNode(Vue.toDisplayString(e.fullLocation+e.address),1)])])],10,P)))),128))])])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-8f5d81c6"]]);export{M as default};
