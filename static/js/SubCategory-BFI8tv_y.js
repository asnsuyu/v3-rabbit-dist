import{a as e,b as t}from"./categoryAPI-CAr7eOxQ.js";import{G as a}from"./GoodsItem-CPaVptlQ.js";import{_ as u}from"./index-DwaHNA8_.js";import"./userStore-BdjKRuiA.js";const l={class:"container"},o={class:"bread-container"},r={class:"sub-container"},n=["infinite-scroll-disabled"],i={key:1,style:{height:"1000px"}},s=u({__name:"SubCategory",setup(u){const s=VueRouter.useRoute(),V=Vue.ref({});Vue.onMounted((()=>(async()=>{const t=await e(s.params.childrenId);V.value=t.result})()));const c=Vue.ref([]),d=Vue.ref({categoryId:s.params.id,page:1,pageSize:20,sortField:"publishTime"}),m=async()=>{const e=await t(d.value);c.value=e.result.items};Vue.onMounted((()=>m()));const v=()=>{d.value.page=1,m()},p=Vue.ref(!1),b=async()=>{d.value.page++;const e=await t(d.value);c.value=[...c.value,...e.result.items],0===e.result.items.length&&(p.value=!0)};return(e,t)=>{const u=Vue.resolveComponent("el-breadcrumb-item"),s=Vue.resolveComponent("el-breadcrumb"),m=Vue.resolveComponent("el-tab-pane"),g=Vue.resolveComponent("el-tabs"),h=Vue.resolveDirective("loading"),f=Vue.resolveDirective("infinite-scroll");return Vue.openBlock(),Vue.createElementBlock("div",l,[Vue.createElementVNode("div",o,[Vue.createVNode(s,{separator:">"},{default:Vue.withCtx((()=>[Vue.createVNode(u,{to:{path:"/"}},{default:Vue.withCtx((()=>[Vue.createTextVNode("首页")])),_:1}),Vue.createVNode(u,{to:{path:`/category/${V.value.parentId}`}},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(V.value.parentName?V.value.parentName:"..."),1)])),_:1},8,["to"]),Vue.createVNode(u,null,{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(V.value.name?V.value.name:"..."),1)])),_:1})])),_:1})]),Vue.createElementVNode("div",r,[Vue.createVNode(g,{modelValue:d.value.sortField,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.sortField=e),onTabChange:v},{default:Vue.withCtx((()=>[Vue.createVNode(m,{label:"最新商品",name:"publishTime"}),Vue.createVNode(m,{label:"最高人气",name:"orderNum"}),Vue.createVNode(m,{label:"评论最多",name:"evaluateNum"})])),_:1},8,["modelValue"]),c.value.length>0?Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"body","infinite-scroll-disabled":p.value},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(c.value,(e=>Vue.withDirectives((Vue.openBlock(),Vue.createBlock(a,{key:e.id,good:e},null,8,["good"])),[[h,0===c.value.length]]))),128))],8,n)),[[f,b]]):Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",i,null,512)),[[h,!0]])])])}}},[["__scopeId","data-v-9b3d77ea"]]);export{s as default};
